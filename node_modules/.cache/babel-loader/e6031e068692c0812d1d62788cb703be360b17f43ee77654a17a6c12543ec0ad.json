{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _Device = require('../Device');\nvar _Device2 = _interopRequireDefault(_Device);\nvar _logger = require('../logger');\nvar _logger2 = _interopRequireDefault(_logger);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar logger = new _logger2.default('SSO.Facebook');\nvar default_options = {\n  facebook_app_id: null,\n  script: 'https://connect.facebook.net/en_US/sdk.js',\n  scope: 'public_profile,email'\n\n  /**\n  * Reference: https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus\n  */\n};\n\nvar Facebook = function () {\n  function Facebook(options) {\n    _classCallCheck(this, Facebook);\n    if (typeof options === 'string') {\n      options = {\n        facebook_app_id: options\n      };\n    }\n    this._options = Object.assign({}, default_options, options);\n    if (!this._options.facebook_app_id) {\n      logger.warn('missing facebook_app_id');\n    }\n    this.signIn = this.signIn.bind(this);\n    this.signOut = this.signOut.bind(this);\n    this.check = this.check.bind(this);\n    this.ready = this.ready.bind(this);\n    this._fbAsyncInit = this._fbAsyncInit.bind(this);\n    this._user = this._user.bind(this);\n    this._fb = null;\n    this._createScript();\n  }\n  _createClass(Facebook, [{\n    key: 'signIn',\n    value: function signIn() {\n      var _this = this;\n      var fb = this._fb;\n      if (!fb) {\n        return Promise.reject('no fb instance');\n      }\n      var scope = this._options.scope;\n      return this.check().then(function (authResponse) {\n        return _this._user(authResponse);\n      }).catch(function (err) {\n        return new Promise(function (resolve, reject) {\n          fb.login(function (response) {\n            resolve(_this._user(response.authResponse));\n          }, {\n            scope: scope\n          });\n        });\n      });\n    }\n  }, {\n    key: 'signOut',\n    value: function signOut() {\n      var fb = this._fb;\n      if (!fb) {\n        return Promise.reject('no fb instance');\n      }\n      return new Promise(function (resolve, reject) {\n        fb.logout(function (response) {\n          logger.debug('signed out', response);\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: 'check',\n    value: function check() {\n      var fb = this._fb;\n      if (!fb) {\n        return Promise.reject('no fb instance');\n      }\n      return new Promise(function (resolve, reject) {\n        fb.getLoginStatus(function (response) {\n          if (response.status === 'connected') {\n            resolve(response.authResponse);\n          } else {\n            reject(response);\n          }\n        });\n      });\n    }\n  }, {\n    key: 'ready',\n    value: function ready() {\n      var facebook_app_id = this._options.facebook_app_id;\n      if (!facebook_app_id) {\n        return Promise.reject('missing facebook_app_id in props');\n      }\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        var checkCount = 0;\n        var checkFB = function checkFB() {\n          checkCount++;\n          if (that._fb) {\n            resolve();\n            return;\n          }\n          if (window.FB) {\n            that._fb = window.FB;\n            resolve();\n            return;\n          }\n          if (checkCount < 5) {\n            window.setTimeout(checkFB, 500);\n          } else {\n            reject('timeout');\n          }\n        };\n        checkFB();\n      });\n    }\n  }, {\n    key: '_user',\n    value: function _user(authResponse) {\n      if (!authResponse) {\n        return Promise.reject('no authResponse');\n      }\n      var accessToken = authResponse.accessToken,\n        userID = authResponse.userID;\n      if (!accessToken) {\n        return Promise.reject('no accessToken');\n      }\n      var fb = this._fb;\n      return new Promise(function (resolve, reject) {\n        fb.api('/me', function (response) {\n          var user = {\n            accessToken: accessToken,\n            userID: userID,\n            name: response.name\n          };\n          logger.debug('user', user);\n          resolve(user);\n        });\n      });\n    }\n  }, {\n    key: '_fbAsyncInit',\n    value: function _fbAsyncInit() {\n      logger.debug('init FB');\n      var facebook_app_id = this._options.facebook_app_id;\n      if (!facebook_app_id) {\n        logger.warn('missing facebook_app_id in props');\n        return;\n      }\n      var fb = window.FB;\n      fb.init({\n        appId: facebook_app_id,\n        cookie: true,\n        xfbml: true,\n        version: 'v2.11'\n      });\n      this._fb = fb;\n    }\n  }, {\n    key: '_createScript',\n    value: function _createScript() {\n      if (window.FB) {\n        this._fbAsyncInit();\n        return;\n      }\n      var script = this._options.script;\n      if (script === 'none') {\n        if (window.FB) {\n          this._fb = window.FB;\n        }\n        return;\n      }\n      window.fbAsyncInit = this._fbAsyncInit;\n      _Device2.default.createScript(this._options.script, true);\n    }\n  }]);\n  return Facebook;\n}();\nexports.default = Facebook;","map":{"version":3,"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_Device","require","_Device2","_interopRequireDefault","_logger","_logger2","obj","__esModule","default","_classCallCheck","instance","TypeError","logger","default_options","facebook_app_id","script","scope","Facebook","options","_options","assign","warn","signIn","bind","signOut","check","ready","_fbAsyncInit","_user","_fb","_createScript","_this","fb","Promise","reject","then","authResponse","catch","err","resolve","login","response","logout","debug","getLoginStatus","status","that","checkCount","checkFB","window","FB","setTimeout","accessToken","userID","api","user","name","init","appId","cookie","xfbml","version","fbAsyncInit","createScript"],"sources":["/Users/salguera/Documents/portfolio/node_modules/fsts/lib/sso/Facebook.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Device = require('../Device');\n\nvar _Device2 = _interopRequireDefault(_Device);\n\nvar _logger = require('../logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = new _logger2.default('SSO.Facebook');\n\nvar default_options = {\n    facebook_app_id: null,\n    script: 'https://connect.facebook.net/en_US/sdk.js',\n    scope: 'public_profile,email'\n\n    /**\n    * Reference: https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus\n    */\n};\nvar Facebook = function () {\n    function Facebook(options) {\n        _classCallCheck(this, Facebook);\n\n        if (typeof options === 'string') {\n            options = { facebook_app_id: options };\n        }\n        this._options = Object.assign({}, default_options, options);\n        if (!this._options.facebook_app_id) {\n            logger.warn('missing facebook_app_id');\n        }\n\n        this.signIn = this.signIn.bind(this);\n        this.signOut = this.signOut.bind(this);\n        this.check = this.check.bind(this);\n        this.ready = this.ready.bind(this);\n\n        this._fbAsyncInit = this._fbAsyncInit.bind(this);\n        this._user = this._user.bind(this);\n\n        this._fb = null;\n\n        this._createScript();\n    }\n\n    _createClass(Facebook, [{\n        key: 'signIn',\n        value: function signIn() {\n            var _this = this;\n\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            var scope = this._options.scope;\n\n            return this.check().then(function (authResponse) {\n                return _this._user(authResponse);\n            }).catch(function (err) {\n                return new Promise(function (resolve, reject) {\n                    fb.login(function (response) {\n                        resolve(_this._user(response.authResponse));\n                    }, { scope: scope });\n                });\n            });\n        }\n    }, {\n        key: 'signOut',\n        value: function signOut() {\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            return new Promise(function (resolve, reject) {\n                fb.logout(function (response) {\n                    logger.debug('signed out', response);\n                    resolve();\n                });\n            });\n        }\n    }, {\n        key: 'check',\n        value: function check() {\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            return new Promise(function (resolve, reject) {\n                fb.getLoginStatus(function (response) {\n                    if (response.status === 'connected') {\n                        resolve(response.authResponse);\n                    } else {\n                        reject(response);\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'ready',\n        value: function ready() {\n            var facebook_app_id = this._options.facebook_app_id;\n\n            if (!facebook_app_id) {\n                return Promise.reject('missing facebook_app_id in props');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                var checkCount = 0;\n                var checkFB = function checkFB() {\n                    checkCount++;\n                    if (that._fb) {\n                        resolve();\n                        return;\n                    }\n\n                    if (window.FB) {\n                        that._fb = window.FB;\n                        resolve();\n                        return;\n                    }\n\n                    if (checkCount < 5) {\n                        window.setTimeout(checkFB, 500);\n                    } else {\n                        reject('timeout');\n                    }\n                };\n                checkFB();\n            });\n        }\n    }, {\n        key: '_user',\n        value: function _user(authResponse) {\n            if (!authResponse) {\n                return Promise.reject('no authResponse');\n            }\n            var accessToken = authResponse.accessToken,\n                userID = authResponse.userID;\n\n            if (!accessToken) {\n                return Promise.reject('no accessToken');\n            }\n\n            var fb = this._fb;\n            return new Promise(function (resolve, reject) {\n                fb.api('/me', function (response) {\n                    var user = {\n                        accessToken: accessToken,\n                        userID: userID,\n                        name: response.name\n                    };\n\n                    logger.debug('user', user);\n                    resolve(user);\n                });\n            });\n        }\n    }, {\n        key: '_fbAsyncInit',\n        value: function _fbAsyncInit() {\n            logger.debug('init FB');\n\n            var facebook_app_id = this._options.facebook_app_id;\n\n            if (!facebook_app_id) {\n                logger.warn('missing facebook_app_id in props');\n                return;\n            }\n\n            var fb = window.FB;\n            fb.init({\n                appId: facebook_app_id,\n                cookie: true,\n                xfbml: true,\n                version: 'v2.11'\n            });\n            this._fb = fb;\n        }\n    }, {\n        key: '_createScript',\n        value: function _createScript() {\n            if (window.FB) {\n                this._fbAsyncInit();\n                return;\n            }\n\n            var script = this._options.script;\n\n            if (script === 'none') {\n                if (window.FB) {\n                    this._fb = window.FB;\n                }\n                return;\n            }\n\n            window.fbAsyncInit = this._fbAsyncInit;\n            _Device2.default.createScript(this._options.script, true);\n        }\n    }]);\n\n    return Facebook;\n}();\n\nexports.default = Facebook;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}